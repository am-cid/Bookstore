<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Bookstore Fragment: main-content</title>
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>
<!--/*@thymesVar id="themeRequestDTO" type="com.simple.Bookstore.Theme.ThemeRequestDTO"*/-->
<!--/*@thymesVar id="previewThemeCss" type="java.lang.String"*/-->
<!--/*@thymesVar id="_overrideThemeUsed" type="com.simple.Bookstore.Theme.ThemeResponseDTO"*/-->

<div id="create-theme-form-div" th:fragment="create-theme-form">
    <form class="profile-details" method="post" th:action="@{/create-theme}" th:object="${themeRequestDTO}">
        <input th:replace="~{fragments/create-theme/create-theme-form :: _createThemeFormFields}" />
        <button class="grid-col-start-1-span-2 justify-self-center"
                title="Theme will be previewed in the next page."
                type="submit">Create Theme</button>
    </form>
</div>

<div id="create-theme-form-div" th:fragment="create-theme-form-confirm">
    <div class="profile-details" th:object="${themeRequestDTO}">
        <input th:replace="~{fragments/create-theme/create-theme-form :: _confirmFormFields}" />
    </div>
</div>

<th:block th:fragment="_createThemeFormFields" th:object="${themeRequestDTO}">
    <label th:for="${#ids.next('username')}" title="required">Theme Name<span class="required">*</span>:</label>
    <input maxlength="100" minlength="3" required
           th:field="*{name}"
           title="Theme name must be between 3 and 100 characters"
           type="text">
    <span class="profile-details-error" th:errors="*{name}" th:if="${#fields.hasErrors('name')}"></span>

    <label th:for="${#ids.next('description')}">Description:</label>
    <input maxlength="2000"
           th:field="*{description}"
           title="Max of 2000 characters (optional)"
           type="text">
    <span class="profile-details-error" th:errors="*{description}" th:if="${#fields.hasErrors('description')}"></span>

    <label th:for="${#ids.next('published')}">Publish Theme:</label>
    <input class="profile-details-checkbox"
           th:field="*{published}"
           title="Make this theme public and searchable by others"
           type="checkbox">

    <div class="grid-col-start-1-span-2 color-inputs">
        <input required
               th:id="base00" th:name="base00"
               th:value="${_overrideThemeUsed != null}
               ? '#' + ${_overrideThemeUsed.base00}
               : (${!themeRequestDTO.isEmpty()}
               ? ${themeRequestDTO.base00}
               : '#A40E60'
               )"
               title="Theme must have color 0"
               type="color" >
        <input required
               th:id="base01" th:name="base01"
               th:value="${_overrideThemeUsed != null}
               ? '#' + ${_overrideThemeUsed.base01}
               : (${!themeRequestDTO.isEmpty()}
               ? ${themeRequestDTO.base01}
               : '#FF0000'
               )"
               title="Theme must have color 1"
               type="color" >
        <input required
               th:id="base02" th:name="base02"
               th:value="${_overrideThemeUsed != null}
               ? '#' + ${_overrideThemeUsed.base02}
               : (${!themeRequestDTO.isEmpty()}
               ? ${themeRequestDTO.base02}
               : '#F61590'
               )"
               title="Theme must have color 2"
               type="color" >
        <input required
               th:id="base03" th:name="base03"
               th:value="${_overrideThemeUsed != null}
               ? '#' + ${_overrideThemeUsed.base03}
               : (${!themeRequestDTO.isEmpty()}
               ? ${themeRequestDTO.base03}
               : '#F88B9E'
               )"
               title="Theme must have color 3"
               type="color" >
        <input required
               th:id="base04" th:name="base04"
               th:value="${_overrideThemeUsed != null}
               ? '#' + ${_overrideThemeUsed.base04}
               : (${!themeRequestDTO.isEmpty()}
               ? ${themeRequestDTO.base04}
               : '#FFD376'
               )"
               title="Theme must have color 4"
               type="color" >
        <input required
               th:id="base05" th:name="base05"
               th:value="${_overrideThemeUsed != null}
               ? '#' + ${_overrideThemeUsed.base05}
               : (${!themeRequestDTO.isEmpty()}
               ? ${themeRequestDTO.base05}
               : '#AAFFB1'
               )"
               title="Theme must have color 5"
               type="color" >
        <input required
               th:id="base06" th:name="base06"
               th:value="${_overrideThemeUsed != null}
               ? '#' + ${_overrideThemeUsed.base06}
               : (${!themeRequestDTO.isEmpty()}
               ? ${themeRequestDTO.base06}
               : '#FFE2E7'
               )"
               title="Theme must have color 6"
               type="color" >
        <input required
               th:id="base07" th:name="base07"
               th:value="${_overrideThemeUsed != null}
               ? '#' + ${_overrideThemeUsed.base07}
               : (${!themeRequestDTO.isEmpty()}
               ? ${themeRequestDTO.base07}
               : '#FFF2D3'
               )"
               title="Theme must have color 7"
               type="color" >
        <span class="profile-details-error" th:errors="*{base00}" th:if="${#fields.hasErrors('base00')}"></span>
        <span class="profile-details-error" th:errors="*{base01}" th:if="${#fields.hasErrors('base01')}"></span>
        <span class="profile-details-error" th:errors="*{base02}" th:if="${#fields.hasErrors('base02')}"></span>
        <span class="profile-details-error" th:errors="*{base03}" th:if="${#fields.hasErrors('base03')}"></span>
        <span class="profile-details-error" th:errors="*{base04}" th:if="${#fields.hasErrors('base04')}"></span>
        <span class="profile-details-error" th:errors="*{base05}" th:if="${#fields.hasErrors('base05')}"></span>
        <span class="profile-details-error" th:errors="*{base06}" th:if="${#fields.hasErrors('base06')}"></span>
        <span class="profile-details-error" th:errors="*{base07}" th:if="${#fields.hasErrors('base07')}"></span>
    </div>
</th:block>

<th:block th:fragment="_confirmFormFields">
    <p class="profile-details-label">Theme Name: </p>
    <p class="profile-details-value" th:text="${themeRequestDTO.name}"></p>

    <p class="profile-details-label">Description: </p>
    <p class="profile-details-value" th:if="${!#strings.isEmpty(themeRequestDTO.description)}"
       th:text="${themeRequestDTO.description}"></p>
    <i class="profile-details-value" th:if="${#strings.isEmpty(themeRequestDTO.description)}">empty</i>

    <p class="profile-details-label">Publish Theme: </p>
    <p class="profile-details-value" th:text="${themeRequestDTO.published ? 'Published' : 'Private'}"></p>

    <div class="grid-col-start-1-span-2 color-inputs">
        <input class="profile-details-value" disabled th:value="${themeRequestDTO.base00}" type="color"/>
        <input class="profile-details-value" disabled th:value="${themeRequestDTO.base01}" type="color"/>
        <input class="profile-details-value" disabled th:value="${themeRequestDTO.base02}" type="color"/>
        <input class="profile-details-value" disabled th:value="${themeRequestDTO.base03}" type="color"/>
        <input class="profile-details-value" disabled th:value="${themeRequestDTO.base04}" type="color"/>
        <input class="profile-details-value" disabled th:value="${themeRequestDTO.base05}" type="color"/>
        <input class="profile-details-value" disabled th:value="${themeRequestDTO.base06}" type="color"/>
        <input class="profile-details-value" disabled th:value="${themeRequestDTO.base07}" type="color"/>
    </div>

    <div class="flex-row gap-10px grid-col-start-1-span-2 justify-self-center">
        <form method="post"
              th:action="@{/create-theme/confirm}"
              th:object="${themeRequestDTO}">
            <input name="_action" type="hidden" value="back">
            <th:block th:replace="~{fragments/create-theme/create-theme-form.html :: _themeRequestHiddenFields}"></th:block>
            <button type="submit">Back</button>
        </form>
        <form method="post"
              th:action="@{/create-theme/confirm}"
              th:object="${themeRequestDTO}">
            <th:block th:replace="~{fragments/create-theme/create-theme-form.html :: _themeRequestHiddenFields}"></th:block>
            <button type="submit">Confirm & Create Theme</button>
        </form>
    </div>
</th:block>

<th:block th:fragment="_themeRequestHiddenFields" th:object="${themeRequestDTO}">
    <input th:field="*{name}" type="hidden" />
    <input th:field="*{description}" type="hidden" />
    <input th:field="*{published}" type="hidden" />
    <input th:field="*{base00}" type="hidden" />
    <input th:field="*{base01}" type="hidden" />
    <input th:field="*{base02}" type="hidden" />
    <input th:field="*{base03}" type="hidden" />
    <input th:field="*{base04}" type="hidden" />
    <input th:field="*{base05}" type="hidden" />
    <input th:field="*{base06}" type="hidden" />
    <input th:field="*{base07}" type="hidden" />
</th:block>

</body>
</html>

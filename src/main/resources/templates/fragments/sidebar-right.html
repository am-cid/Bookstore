<!DOCTYPE html>
<html lang="en"
      xmlns:sec="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Bookstore Fragment: sidebar-right</title>
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>

<div id="sidebar-right" th:fragment="sidebar-right">
    <div id="login-div" sec:authorize="isAnonymous()">
        <div class="sidebar-right-heading" id="login-form-heading">
            <div th:replace="~{fragments/svg-fragments/heading-surrounded-by-circles :: svgHeading('LOG IN', 98, 19, 97)}"></div>
        </div>
        <div id="login-form">
            <form method="post" th:action="@{/api/v1/auth/login}">
                <div>
                    <label for="username">Username</label><br>
                    <input id="username" name="username" required type="text">
                </div>
                <div>
                    <label for="password">Password</label><br>
                    <input id="password" name="password" required type="password">
                </div>
                <div th:if="${param.login_error}">
                    <span class="profile-details-error">Invalid username or password</span>
                </div>
                <div>
                    <input id="remember-me" name="remember-me" type="checkbox">
                    <label for="remember-me">Remember me</label>
                </div>
                <div>
                    <button type="submit">Log In</button>
                </div>
                <div>
                    <a th:href="@{/register}">Register account</a>
                </div>
            </form>
        </div>
    </div>
    <div id="your-account-div" sec:authorize="isAuthenticated()">
        <strong id="your-account-title">Your Account</strong>
        <form action="#" id="your-account-details" method="post" th:action="@{/api/v1/auth/logout}">
            <p id="your-account-welcome">Welcome <strong th:text="${user.getProfile().getDisplayName()}"></strong></p>
            <a th:href="@{/profile/me}">My Account</a>
            <button type="submit">Logout</button>
        </form>
    </div>
    <div th:replace="~{fragments/sidebar-right.html :: _sidebarRightUsedTheme}"></div>
</div>

<div class="sidebar-right-div" id="theme-div" th:fragment="_sidebarRightUsedTheme">
    <div class="sidebar-right-heading" id="theme-heading">
        <div th:replace="~{fragments/svg-fragments/heading-surrounded-by-circles :: svgHeading('THEME', 98, 19, 98)}"></div>
    </div>
    <!-- show used theme with swatch 8 colors -->
    <div class="sidebar-right-content">
        <div class="theme-div">
            <ul class="theme-colors-list">
                <li class="theme-color" style="background-color: var(--color-00, #A40E60)"></li>
                <li class="theme-color" style="background-color: var(--color-01, #FF0000)"></li>
                <li class="theme-color" style="background-color: var(--color-02, #F61590)"></li>
                <li class="theme-color" style="background-color: var(--color-03, #F88B9E)"></li>
                <li class="theme-color" style="background-color: var(--color-04, #FFD376)"></li>
                <li class="theme-color" style="background-color: var(--color-05, #AAFFB1)"></li>
                <li class="theme-color" style="background-color: var(--color-06, #FFE2E7)"></li>
                <li class="theme-color" style="background-color: var(--color-07, #FFF2D3)"></li>
            </ul>
            <th:block th:if="${_overrideThemeUsed != null}">
                <p class="theme-details">
                    <strong th:text="${_overrideThemeUsed.name()}"></strong> by
                    <a th:href="@{/profile/{username}(username=${_overrideThemeUsed.username()})}"
                       th:text="${_overrideThemeUsed.userDisplayName()}"></a>
                </p>
                <form action="#" method="post" th:action="@{/profile/theme}">
                    <input name="_method" type="hidden" value="delete" />
                    <button type="submit">Unset Theme</button>
                </form>
            </th:block>
            <strong th:if="${_overrideThemeUsed == null}">
                Default Mangagamer Theme
            </strong>
        </div>
        <!-- change theme link to change theme page -->
        <a sec:authorize="isAnonymous()" th:href="@{/register(error=change_theme)}">Change Theme</a>
        <th:block sec:authorize="isAuthenticated()">
            <a th:href="@{/search(type='THEME')}">Change Theme</a>
            <a th:href="@{/create-theme}">Create Theme</a>
        </th:block>
    </div>
</div>

</body>
</html>